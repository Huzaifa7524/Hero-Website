{% load static %}
<link rel="stylesheet" href="{% static 'youtube/css/home_subblocks/hero_section.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<div class="jumbotron text-left" style="margin-bottom:0 ; background-image:linear-gradient(to left, rgba(245, 246, 252, -0.48), rgb(10 10 10 / 141%)),url({{hero_section.background_image_url}});
">
    <h1>Hero Reads Here</h1>
    <p>Watch Your Favourite Videos Here</p> 
    <div>
        <!-- The Modal -->
        <div class="modal" id="myModal">
            <div class="modal-dialog">
            <div class="modal-content">
        
                <!-- Modal Header -->
                <!-- <div class="modal-header">
                <h4 class="modal-title">Modal Heading</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div> -->
        
                <!-- Modal body -->
                <div class="modal-body">
                    <iframe class="iframe yt_player_iframe"  src="https://www.youtube.com/embed/{{hero_section.video_id}}">
                    </iframe>
                    <i id="close_btn" class="fa fa-close btn-close" style="font-size:24px; color:white" data-bs-dismiss="modal"></i>
                    <!-- <button id="close_btn" type="button" class="btn-close" data-bs-dismiss="modal"></button> -->
                    
                </div>
        
                <!-- Modal footer -->
                <div class="modal-footer">
                <!-- <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button> -->
                </div>
        
            </div>
            </div>
        </div>
  
        <form action="{% url 'video_player' %}" method="post" style="display: flex;">
            {% csrf_token %}
            <input  hidden name="video_description" value="{{hero_section.video_description}}">
            <input hidden name="video_title" value="{{hero_section.video_title}}">
            <input hidden id='video_id' name="video_id" value="{{hero_section.video_id}}">
            <input hidden name="channel_title" value="{{hero_section.channel_title}}">
            <input hidden name="video_date" value="{{hero_section.upload_date}}">
            <input hidden name="channel_id" value="{{hero_section.channel_id}}">
            <input hidden name="video_thumbnail_pic" value="{{hero_section.background_image_url}}">
            <button type="button" class="upper_section_buttons upper_section_buttons_active" data-bs-toggle="modal" data-bs-target="#myModal">Watch Now</button>
            <Button class="upper_section_buttons">More Details</Button>
        </form>
        
    </div>

</div>
<script>
    var stopAllYouTubeVideos = () => { 
  var iframes = document.querySelectorAll('iframe');
  Array.prototype.forEach.call(iframes, iframe => { 
    iframe.contentWindow.postMessage(JSON.stringify({ event: 'command', 
  func: 'stopVideo' }), '*');
 });
}
    $("#close_btn").click(function(){
        console.log('click close')
        $('.yt_player_iframe').each(function(){
            console.log('in player')
        var el_src = $(this).attr("src");
        $(this).attr("src",el_src);
      });
    });
    
</script>